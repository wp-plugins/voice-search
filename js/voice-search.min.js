/*! Voice Search - v1.1.0
 * https://spinpress.com/wordpress-web-speech-api/
 * Copyright (c) 2015; * Licensed GPLv2+ */

!function(){"use strict";function a(a){return a.length?a[0].toUpperCase()+a.slice(1):a}if("webkitSpeechRecognition"in window){var b=6,c=document.querySelectorAll("form[role=search]");0===c.length&&(c=document.querySelectorAll("form[class=searchform]")),0===c.length&&(c=document.querySelectorAll("form[id=searchform]")),[].forEach.call(c,function(c){function d(){m=setTimeout(function(){q.stop()},1e3*b)}var e=c.querySelector("input[name=s]");if(null===e&&(e=c.querySelector("input[name=search]")),null!==e){c.classList.add("voice-search-wrapper");var f=document.createElement("button");f.setAttribute("class","voice-search-button"),f.appendChild(document.createTextNode(voice_search.button_message));var g=document.createElement("span");g.setAttribute("class","voice-search-mic"),f.appendChild(g);var h=document.createElement("span");h.setAttribute("class","voice-search-holder"),f.appendChild(h);var i=e.offsetHeight,j=parseInt(getComputedStyle(e).borderRightWidth,10),k=.8*i,l="top: "+.1*i+"px; ";l+="height: "+k+"px !important; ",l+="width: "+k+"px !important; ",l+="padding-right: "+k-j+"px !important; ",f.setAttribute("style",l),c.appendChild(f);var m,n="",o=!1,p=null,q=new webkitSpeechRecognition;q.continuous=!0,q.onstart=function(){p=e.placeholder,e.placeholder=voice_search.talk_message,o=!0,f.classList.add("listening"),d()},q.onend=function(){o=!1,clearTimeout(m),f.classList.remove("listening"),null!==p&&(e.placeholder=p)},q.onresult=function(b){clearTimeout(m);for(var c=b.resultIndex;c<b.results.length;++c)b.results[c].isFinal&&(n+=b.results[c][0].transcript);n=a(n),e.value=n,d()},f.addEventListener("click",function(a){return a.preventDefault(),o?void q.stop():(e.value=n="",void q.start())},!1)}})}}();
//# sourceMappingURL=voice-search.min.js.map