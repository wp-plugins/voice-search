/*! Voice Search - v1.2.0
 * https://spinpress.com/wordpress-web-speech-api/
 * Copyright (c) 2015; * Licensed GPLv2+ */

!function(){"use strict";function a(a){return a.length?a[0].toUpperCase()+a.slice(1):a}if("webkitSpeechRecognition"in window){var b=6,c=document.querySelectorAll("form[role=search]");0===c.length&&(c=document.querySelectorAll("form[class=searchform]")),0===c.length&&(c=document.querySelectorAll("form[id=searchform]")),[].forEach.call(c,function(c){function d(a){return a=parseInt(a,10),isNaN(a)||null===a||"undefined"==typeof a?0:a}function e(){p=setTimeout(function(){t.stop()},1e3*b)}var f=c.getAttribute("style");c.setAttribute("style",f+"; display: block !important");var g=c.querySelector("input[name=s]");if(null===g&&(g=c.querySelector("input[name=search]")),null===g)return void c.setAttribute("style",f);c.classList.add("voice-search-wrapper");var h=document.createElement("button");h.setAttribute("class","voice-search-button"),h.appendChild(document.createTextNode(voice_search.button_message));var i=document.createElement("span");i.setAttribute("class","voice-search-mic"),h.appendChild(i);var j=document.createElement("span");j.setAttribute("class","voice-search-holder"),h.appendChild(j);var k=d(g.offsetHeight),l=d(getComputedStyle(g).borderRightWidth),m=d(.8*k),n=d(.1*k)+d(getComputedStyle(c).getPropertyValue("padding-top")),o="top: "+n+"px; ";o+="height: "+m+"px !important; ",o+="width: "+m+"px !important; ",o+="margin-right: "+d(m-l)+"px !important; ",h.setAttribute("style",o),c.appendChild(h),c.setAttribute("style",f);var p,q="",r=!1,s=null,t=new webkitSpeechRecognition;t.continuous=!0,t.onstart=function(){s=g.placeholder,g.placeholder=voice_search.talk_message,r=!0,h.classList.add("listening"),e()},t.onend=function(){r=!1,clearTimeout(p),h.classList.remove("listening"),null!==s&&(g.placeholder=s)},t.onresult=function(b){clearTimeout(p);for(var c=b.resultIndex;c<b.results.length;++c)b.results[c].isFinal&&(q+=b.results[c][0].transcript);q=a(q),g.value=q,e()},h.addEventListener("click",function(a){return a.preventDefault(),r?void t.stop():(g.value=q="",void t.start())},!1)})}}();
//# sourceMappingURL=voice-search.min.js.map