/*! voice-search - v1.0.0 - 2014-12-28 */

!function(){"use strict";function a(a){return a.length?a[0].toUpperCase()+a.slice(1):a}if("webkitSpeechRecognition"in window){var b=6,c=document.querySelectorAll("form[role=search]");[].forEach.call(c,function(c){function d(){l=setTimeout(function(){p.stop()},1e3*b)}var e=c.querySelector("input[name=s]");c.classList.add("voice-search-wrapper");var f=document.createElement("button");f.setAttribute("class","voice-search-button"),f.appendChild(document.createTextNode(voice_search.button_message));var g=document.createElement("span");g.setAttribute("class","voice-search-mic"),f.appendChild(g);var h=document.createElement("span");h.setAttribute("class","voice-search-holder"),f.appendChild(h);var i=e.offsetHeight,j=parseInt(getComputedStyle(e).borderRightWidth,10),k=.8*i;f.style.top=.1*i+"px",f.style.height=f.style.width=k+"px",e.style.paddingRight=k-j+"px",c.appendChild(f);var l,m="",n=!1,o=null,p=new webkitSpeechRecognition;p.continuous=!0,p.onstart=function(){o=e.placeholder,e.placeholder=voice_search.talk_message,n=!0,f.classList.add("listening"),d()},p.onend=function(){n=!1,clearTimeout(l),f.classList.remove("listening"),null!==o&&(e.placeholder=o)},p.onresult=function(b){clearTimeout(l);for(var c=b.resultIndex;c<b.results.length;++c)b.results[c].isFinal&&(m+=b.results[c][0].transcript);m=a(m),e.value=m,d()},f.addEventListener("click",function(a){return a.preventDefault(),n?void p.stop():(e.value=m="",void p.start())},!1)})}}();
//# sourceMappingURL=voice-search.min.js.map